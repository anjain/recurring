<table class="table table-bordered">
	<tr>
		<th width="50%">Shipping Address</th>
		<th width="50%">Billing Address</th>
	</tr>
	<tr>
		<td>
			<%= @invoice.ship_to_account_name %><br/>
			<% unless @invoice.ship_to_attention.blank? %><%= @invoice.ship_to_attention %><br/><% end %>
			<%= @invoice.ship_to_address_1 %><br/>
			<% unless @invoice.ship_to_address_2.blank? %><%= @invoice.ship_to_address_2 %><br/><% end %>
			<%= @invoice.ship_to_city %>, <%= @invoice.ship_to_state %> <%= @invoice.ship_to_zip %><br/>
			<%= @invoice.ship_to_phone %>
		</td>
		<td>
			<%= @invoice.bill_to_account_name %><br/>
			<% unless @invoice.bill_to_attention.blank? %><%= @invoice.bill_to_attention %><br/><% end %>
			<%= @invoice.bill_to_address_1 %><br/>
			<% unless @invoice.bill_to_address_2.blank? %><%= @invoice.bill_to_address_2 %><br/><% end %>
			<%= @invoice.bill_to_city %>, <%= @invoice.bill_to_state %> <%= @invoice.bill_to_zip %><br/>
			<%= @invoice.bill_to_phone %>
		</td>
	</tr>
</table>

<table class="table table-bordered">
	<tr>
		<th width="25%">PO Number</th>
		<th width="25%">Invoice Date</th>
		<th width="25%">Due Date</th>
		<th width="25%">Invoice Number</th>
	</tr>
	<tr>
		<td><%= @invoice.po_number %></td>
		<td><%= @invoice.date.strftime("%m/%d/%Y") %></td>
		<td><%= @invoice.due_on.strftime("%m/%d/%Y") %></td>
		<td><%= @invoice.number %></td>
	</tr>
</table>

<table class="table table-bordered">
	
	<tr>
		<th width="5%" class="text-center"></th>
		<th>Item Name/Description</th>
		<th width="7%" class="text-center">Quantity</th>
		<th width="7%" class="text-center">Canceled</th>
		<th width="7%" class="text-center">Actual</th>
		<th width="7%" class="text-center">Price</th>
		<th width="7%" class="text-center">Subtotal</th>
	</tr>
	
	<% @invoice.order_line_items.active.each_with_index do |li, idx| %>
	<tr>
		<td class="text-center"><%= li.order_line_number %></td>
		<td><%= li.item.number unless li.item.nil? %> / <%= li.item.name unless li.item.nil? %></td>
		<td class="text-center"><%= li.quantity.to_i %></td>
		<td class="text-center"><%= li.quantity_canceled.to_i %></td>
		<td class="text-center"><%= li.actual_quantity.to_i %></td>
		<td class="text-center"><%= number_to_currency(li.price) %></td>
		<td class="text-center"><%= number_to_currency(li.sub_total) %></td>
	<tr>
	<% end %>
	
	<tr>
		<td colspan="5">Sub Total</td>
		<td colspan="2" class="text-center"><strong><%= number_to_currency(@invoice.sub_total) %></strong></td>
	</tr>
	<tr>
		<td colspan="5"><%= @invoice.order_shipping_method.name unless @invoice.order_shipping_method.nil? %> - Shipping</td>
		<td colspan="2" class="text-center"><strong> <%= number_to_currency(@invoice.shipping_total) %></strong></td>
	</tr>
	<tr>
		<td colspan="5">Invoice Total</td>
		<td colspan="2" class="text-center"><strong> <%= number_to_currency(@invoice.shipping_total.to_f + @invoice.sub_total.to_f) %></strong></td>
	</tr>
	<tr>
		<td colspan="5">Payments Total</td>
		<td colspan="2" class="text-center"><strong> <%= number_to_currency(@invoice.payments_total.to_f) %></strong></td>
	</tr>
	<tr>
		<td colspan="5">Balance Due</td>
		<td colspan="2" class="text-center"><strong> <%= number_to_currency(@invoice.balance_due.to_f) %></strong></td>
	</tr>
	<% unless @invoice.paid %>
	<tr>
		<td colspan="7"><%= link_to "Pay Invoice", "/my_account/invoice/#{@invoice.number}/pay", :class => "btn btn-primary pull-right", :remote => true %></td>
	</tr>
	<% end %>
</table>